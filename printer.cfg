# Modified by Simple AF 2025-11-19_01-14-00
# K1
# Printer_size: 220x220x250
# Version: v1.0.25
# CreateDate: 2023/03/21
# Nozzle_mcu: chip: GD32F303CBT6
#             version: CR-K1-MAX-NOZZLE-V1.0.0
# Leveling_mcu: chip: GD32E230F8P6
#             version: CR-K1-MAX-LEVELING-V1.0.0
# mcu: chip: GD32F303RET6
#      version: CR4CU220812S12

[include sensorless.cfg]
[include internal_macros.cfg]

[include useful_macros.cfg]

[include belts_calibration.cfg]

[include start_end.cfg]

[include Line_Purge.cfg]

[include Smart_Park.cfg]

[include fan_control.cfg]

[include client.cfg]

[include quickstart.cfg]

[include eddyng.cfg]

[include eddyng_macro.cfg]

[include custom.cfg]

[mcu]
serial: /dev/ttyS7
baud: 230400
restart_method: command

[mcu nozzle_mcu]
serial: /dev/ttyS1
baud: 230400
restart_method: command

[verify_heater extruder]
[verify_heater heater_bed]
check_gain_time: 120
heating_gain: 1.0
hysteresis: 10

[gcode_arcs]
resolution: 1.0

[stepper_x]
step_pin: PC2
dir_pin: !PB9
enable_pin: !PC3
microsteps: 32
rotation_distance: 72
endstop_pin: tmc2209_stepper_x:virtual_endstop
position_endstop: 229
position_min: -1
position_max: 229
homing_speed: 36
homing_retract_dist:0

[tmc2209 stepper_x]
uart_pin:PA9
interpolate: True
run_current:1.5
sense_resistor: 0.100
stealthchop_threshold: 0
uart_address:3
diag_pin: ^PB12
# driver_IHOLDDELAY: 8
# driver_TPOWERDOWN: 20
# driver_TBL: 1
# driver_TOFF: 1
# driver_HEND: 0
# driver_HSTRT: 7
driver_SGTHRS: 65
# hold_current:1.0

[stepper_y]
step_pin: PB8
dir_pin: !PB7
enable_pin: !PC3
microsteps: 32
rotation_distance: 72
endstop_pin: tmc2209_stepper_y:virtual_endstop
position_endstop: -0.5
position_min: -0.5
position_max: 226
homing_speed: 36
homing_retract_dist:0

[tmc2209 stepper_y]
uart_pin:PA10
interpolate: True
run_current:1.5
sense_resistor: 0.100
stealthchop_threshold: 0
uart_address:3
diag_pin: ^PB13
# driver_IHOLDDELAY: 8
# driver_TPOWERDOWN: 20
# driver_TBL: 1
# driver_TOFF: 1
# driver_HEND: 0
# driver_HSTRT: 7
driver_SGTHRS: 65
# hold_current:1.0

[stepper_z]
step_pin: PB6
dir_pin: !PB5
enable_pin: !PC3
microsteps: 16
rotation_distance:8
gear_ratio: 64:20
endstop_pin: probe:z_virtual_endstop
position_max: 252
position_min: -5
# position_endstop: 0

[tmc2209 stepper_z]
uart_pin: PA11
uart_address: 3
run_current: 0.8
diag_pin: ^PB14
stealthchop_threshold: 0
sense_resistor: 0.100
# driver_IHOLDDELAY: 8
# driver_TPOWERDOWN: 20
# driver_TBL: 1
# driver_TOFF: 1
# driver_HEND: 2
# driver_HSTRT: 2
driver_SGTHRS: 0

[extruder]
max_extrude_only_distance: 1000.0
max_extrude_cross_section: 80
step_pin: nozzle_mcu:PB1
dir_pin: nozzle_mcu:PB0
enable_pin: !nozzle_mcu:PB2
microsteps: 16
rotation_distance: 6.7220
nozzle_diameter: 0.400
filament_diameter: 1.750
heater_pin: nozzle_mcu:PB7
sensor_type: PT1000
sensor_pin: nozzle_mcu:PA0
pressure_advance: 0.035
pressure_advance_smooth_time: 0.040
min_temp: 0
max_temp: 320
# control: pid
# pid_Kp: 25.013
# pid_Ki: 2.566
# pid_Kd: 60.966

[tmc2209 extruder]
uart_pin: nozzle_mcu:PB11
tx_pin: nozzle_mcu:PB10
uart_address: 3
run_current: 0.55
sense_resistor: 0.150
stealthchop_threshold: 0
# driver_IHOLDDELAY: 8
# driver_TPOWERDOWN: 20
# driver_TBL: 2
# driver_TOFF: 3
# driver_HEND: 0
# driver_HSTRT: 5

[heater_bed]
heater_pin: PB10
sensor_type: EPCOS 100K B57560G104F
sensor_pin: PC4
# control: pid
# pid_kp: 27
# pid_ki: 0.08
# pid_kd: 0
min_temp: 0
max_temp: 115
# control: watermark

[filament_switch_sensor filament_sensor]
pause_on_runout: false
switch_pin: !PC15
runout_gcode: _ON_FILAMENT_RUNOUT
event_delay: 1.5
pause_delay: 0.25

# [filament_switch_sensor filament_sensor_nozzle]
# pause_on_runout: false
# switch_pin: !nozzle_mcu:PA10
# event_delay: 1.5
# pause_delay: 0.25
# insert_gcode: LOAD_FILAMENT
# runout_gcode: _ON_FILAMENT_RUNOUT

[output_pin LED]
pin:PB0
pwm: True
cycle_time: 0.010
value: 1

[adxl345]
cs_pin: nozzle_mcu:PA4
spi_speed: 5000000
axes_map: x,-z,y
spi_software_sclk_pin: nozzle_mcu:PA5
spi_software_mosi_pin: nozzle_mcu:PA7
spi_software_miso_pin: nozzle_mcu:PA6

[resonance_tester]
accel_chip: adxl345
accel_per_hz: 75
# min_freq: 30
# max_freq: 100
probe_points:
   110,110,10

[printer]
kinematics: corexy
max_velocity: 800
max_accel: 20000
max_z_velocity: 20
square_corner_velocity: 5.0
max_z_accel: 300
# square_corner_max_velocity: 200.0
# max_accel_to_decel: 20000

[probe_eddy_ng btt_eddy]

[exclude_object]

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 64.064
#*# pid_ki = 1.014
#*# pid_kd = 1011.413
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 35.434
#*# pid_ki = 11.812
#*# pid_kd = 26.575
#*#
#*# [input_shaper]
#*# shaper_type_x = mzv
#*# shaper_freq_x = 53.6
#*# shaper_type_y = mzv
#*# shaper_freq_y = 47.6
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	0.030649, 0.010939, -0.003951, -0.007761, -0.008928, -0.002465, -0.006278, -0.008928, -0.006595, -0.008928, -0.008928, -0.002465, -0.000137, -0.001300, -0.007761, -0.008928, -0.008928, 0.001026, 0.016196, 0.027193
#*# 	0.019660, 0.002184, -0.003629, -0.008928, -0.006278, -0.006595, -0.002465, 0.001026, -0.001300, -0.000137, -0.001300, 0.001026, 0.005983, 0.001026, -0.000137, -0.006278, -0.002465, -0.001300, 0.003343, 0.010939
#*# 	-0.001300, -0.008928, -0.017750, -0.017750, -0.013921, -0.008928, -0.005112, -0.001300, -0.001300, -0.001300, -0.001300, 0.001026, 0.001026, 0.001026, -0.001300, 0.001026, -0.006595, -0.006595, -0.005112, 0.001026
#*# 	-0.008928, -0.015092, -0.018921, -0.018921, -0.018921, -0.027779, -0.015086, -0.008928, -0.013921, -0.018921, -0.017750, -0.007761, -0.006595, -0.008928, -0.008928, -0.017750, -0.017750, -0.010096, -0.008928, -0.008928
#*# 	-0.017750, -0.023935, -0.027779, -0.028955, -0.028955, -0.020094, -0.018921, -0.018921, -0.018921, -0.018921, -0.018921, -0.034020, -0.017750, -0.010096, -0.008928, -0.010096, -0.008928, -0.010096, -0.008928, -0.011263
#*# 	-0.049138, -0.031303, -0.032812, -0.036668, -0.036668, -0.028955, -0.030129, -0.028955, -0.031303, -0.039023, -0.028955, -0.030129, -0.030129, -0.028955, -0.022762, -0.025111, -0.023938, -0.023935, -0.018921, -0.023935
#*# 	-0.053029, -0.028955, -0.028955, -0.028955, -0.028955, -0.028955, -0.028955, -0.028955, -0.028955, -0.028955, -0.030129, -0.028955, -0.028955, -0.018921, -0.028955, -0.028955, -0.020094, -0.025111, -0.018921, -0.027779
#*# 	-0.049138, -0.044080, -0.037845, -0.039023, -0.039023, -0.037845, -0.020162, -0.039023, -0.039023, -0.039023, -0.044080, -0.039023, -0.039023, -0.039023, -0.039023, -0.039023, -0.039023, -0.028955, -0.028955, -0.035163
#*# 	-0.049138, -0.027779, -0.025111, -0.028955, -0.028955, -0.030129, -0.028955, -0.028955, -0.028955, -0.028955, -0.028955, -0.028955, -0.031303, -0.028955, -0.030129, -0.028955, -0.028955, -0.028955, -0.023935, -0.028955
#*# 	-0.039023, -0.021266, -0.028955, -0.028955, -0.039023, -0.039023, -0.033989, -0.033989, -0.028955, -0.039023, -0.039023, -0.039023, -0.039023, -0.039023, -0.050694, -0.028955, -0.028955, -0.028955, -0.028955, -0.033989
#*# 	-0.035163, -0.017750, -0.031676, -0.028955, -0.028955, -0.025111, -0.020094, -0.018921, -0.013921, -0.018921, -0.027779, -0.028955, -0.027779, -0.018921, -0.020094, -0.018921, -0.018921, -0.023935, -0.018921, -0.028955
#*# 	-0.023938, -0.039023, -0.018921, -0.020094, -0.033989, -0.044080, -0.030129, -0.027779, -0.028955, -0.028955, -0.028955, -0.028955, -0.028955, -0.020094, -0.018921, -0.018921, -0.017750, -0.018921, -0.018921, -0.028955
#*# 	-0.017750, 0.006304, -0.001300, -0.008928, -0.008928, -0.015092, -0.012753, -0.008928, -0.008928, -0.015092, -0.008928, -0.011263, -0.006595, -0.006595, -0.005112, -0.010096, -0.008928, -0.008928, -0.008928, -0.018921
#*# 	-0.008928, -0.017750, -0.028955, -0.032812, -0.039023, -0.039023, -0.033989, -0.040205, -0.001300, -0.028955, -0.039023, -0.030129, -0.028955, -0.025111, -0.023938, -0.008928, -0.008928, -0.012429, -0.011263, -0.018921
#*# 	0.001026, 0.023428, 0.010939, 0.009781, 0.008623, 0.008623, 0.010939, 0.010939, 0.008623, 0.001026, 0.004823, 0.004823, 0.009781, 0.008621, 0.001026, 0.001026, 0.001026, -0.000137, -0.003948, -0.018921
#*# 	0.018505, 0.001026, -0.005114, -0.008928, -0.012429, -0.006595, -0.005112, -0.008928, -0.012753, -0.008928, -0.012753, -0.018921, -0.008928, -0.000137, -0.012753, -0.001300, -0.011263, -0.008928, -0.001300, -0.011263
#*# 	0.030954, 0.043348, 0.038149, 0.038149, 0.038151, 0.038149, 0.035857, 0.032106, 0.029496, 0.022277, 0.020814, 0.019660, 0.020814, 0.016196, 0.010939, 0.008623, 0.001026, 0.002184, 0.001026, 0.001026
#*# 	0.043348, 0.020814, 0.020814, 0.020814, 0.019660, 0.016196, 0.018505, 0.010939, 0.010939, 0.008623, 0.008621, 0.006304, 0.008623, 0.001026, 0.003343, 0.001026, -0.008928, -0.008928, 0.001026, 0.003665
#*# 	0.062802, 0.072472, 0.067340, 0.062802, 0.062802, 0.062802, 0.060527, 0.062802, 0.053095, 0.045632, 0.050505, 0.043348, 0.043348, 0.039297, 0.029496, 0.028344, 0.020814, 0.019660, 0.018506, 0.020814
#*# 	0.079847, 0.062802, 0.053095, 0.045632, 0.039297, 0.039297, 0.033564, 0.028346, 0.028344, 0.030649, 0.030649, 0.023428, 0.030649, 0.024892, 0.013568, 0.017351, 0.016196, 0.009781, 0.022277, 0.033253
#*# x_count = 20
#*# y_count = 20
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 10.0
#*# max_x = 204.94
#*# min_y = 10.0
#*# max_y = 209.88000000000005
#*#
#*# [bed_mesh hot]
#*# version = 1
#*# points =
#*# 	0.038639, 0.032016, 0.029318, 0.015993, 0.009299, 0.008391, 0.008391, 0.008391, 0.004582, 0.000769, 0.001677, 0.000769, 0.000769, 0.000769, 0.000769, 0.000769, 0.002585, 0.008391, 0.016895, 0.037742
#*# 	0.023565, 0.017797, 0.015993, 0.008391, 0.000769, 0.000769, -0.002144, 0.000769, -0.003237, -0.006884, 0.002585, 0.008391, 0.000769, 0.000769, 0.000769, 0.001677, 0.000769, 0.008391, 0.021760, 0.023565
#*# 	0.016886, 0.010206, 0.008391, 0.010206, 0.001677, 0.000769, 0.000769, -0.000324, -0.005971, -0.005057, -0.012729, -0.012729, -0.014558, -0.013644, -0.012729, -0.009072, -0.005971, -0.002144, 0.004580, 0.015993
#*# 	-0.002144, -0.005971, -0.006884, -0.005971, -0.009072, -0.006884, -0.005971, -0.006884, -0.006884, -0.005057, -0.005057, -0.005971, -0.007978, -0.010901, -0.012729, -0.014558, -0.012729, -0.005057, 0.001677, 0.007485
#*# 	-0.013644, -0.005057, -0.006884, -0.009807, -0.006884, -0.005971, -0.003237, -0.006884, -0.009072, -0.012729, -0.020423, -0.021340, -0.022257, -0.028142, -0.023547, -0.022444, -0.020423, -0.012729, -0.009072, -0.005057
#*# 	-0.012729, -0.009072, -0.013644, -0.012729, -0.014558, -0.013644, -0.012729, -0.013644, -0.020423, -0.018590, -0.015843, -0.012729, -0.014558, -0.012729, -0.020423, -0.020423, -0.020423, -0.012729, -0.006884, -0.005057
#*# 	-0.006884, 0.000769, -0.005971, 0.000769, -0.002144, 0.000769, 0.000769, -0.005971, -0.010901, -0.012729, -0.013644, -0.013644, -0.018590, -0.018590, -0.008009, -0.020423, -0.013644, -0.013644, -0.006884, -0.005971
#*# 	-0.005971, -0.006884, -0.003237, 0.000769, -0.006884, -0.005057, -0.005057, -0.006884, -0.010901, -0.012729, -0.012729, -0.006884, -0.012729, -0.010901, -0.012729, -0.013644, -0.012729, -0.006884, 0.001677, 0.000769
#*# 	-0.005971, 0.000769, 0.000769, -0.003237, -0.005057, 0.000769, -0.005971, -0.006884, -0.023388, -0.014558, -0.020423, -0.022257, -0.020423, -0.023361, -0.028142, -0.020423, -0.020423, -0.014558, -0.023388, 0.000769
#*# 	0.009299, 0.008391, 0.006218, 0.000769, 0.000769, 0.000769, 0.000769, 0.000769, -0.002144, -0.005057, -0.005057, -0.005971, -0.003237, -0.007978, -0.012729, -0.012729, -0.006884, -0.005057, 0.004580, 0.002585
#*# 	0.018877, 0.015993, 0.013100, 0.008391, 0.008391, 0.008391, 0.008391, 0.000769, -0.005057, -0.005971, -0.006884, -0.006884, -0.006884, -0.012729, -0.012729, -0.010901, -0.003237, 0.000769, 0.002585, 0.008391
#*# 	0.008391, 0.015088, 0.008391, 0.000769, 0.000769, -0.000324, 0.000769, 0.000769, -0.005971, -0.005057, -0.005057, -0.005971, -0.005971, -0.005057, -0.005971, -0.006884, -0.000324, 0.000769, 0.009299, 0.013100
#*# 	0.016895, 0.021760, 0.015993, 0.008391, 0.008391, 0.008391, 0.004582, 0.005488, 0.000769, 0.000769, 0.000769, 0.000769, -0.005971, 0.000769, 0.000769, 0.000769, 0.008391, 0.012194, 0.015993, 0.026442
#*# 	0.028243, 0.023565, 0.023565, 0.015993, 0.010206, 0.009299, 0.008391, 0.010206, 0.008391, 0.008391, 0.010206, 0.013100, 0.009299, 0.010206, 0.009299, 0.015993, 0.012192, 0.017797, 0.022663, 0.025368
#*# 	0.021583, 0.023565, 0.015993, 0.016895, 0.010206, 0.015088, 0.009299, 0.009299, 0.008391, 0.005488, 0.005488, 0.000769, 0.000769, 0.000769, 0.002585, 0.008391, 0.012194, 0.017797, 0.016895, 0.023565
#*# 	0.026442, 0.023565, 0.019779, 0.015993, 0.010206, -0.001253, 0.011287, 0.015993, 0.008391, 0.005488, 0.008391, 0.015993, 0.015993, 0.015993, 0.015993, 0.012194, 0.023565, 0.024467, 0.027343, 0.033983
#*# 	0.029318, 0.025368, 0.023565, 0.019779, 0.015993, 0.015993, 0.015993, 0.009299, 0.010206, 0.010206, 0.015993, 0.009299, 0.013100, 0.015993, -0.005057, 0.024467, 0.028243, 0.031117, 0.037742, 0.042392
#*# 	0.038639, 0.033982, 0.032016, 0.031117, 0.027343, 0.025368, 0.029318, 0.027341, 0.025368, 0.023565, 0.030218, 0.031117, 0.032914, 0.031117, 0.031117, 0.027343, 0.031117, 0.039534, 0.051837, 0.048095
#*# 	0.054676, 0.046141, 0.039534, 0.036846, 0.047180, 0.031117, 0.031117, 0.030218, 0.023565, 0.025368, 0.031117, 0.030218, 0.029318, 0.025368, 0.027343, 0.032016, 0.039534, 0.046141, 0.053618, 0.059293
#*# 	0.053618, 0.052728, 0.046141, 0.031117, 0.024467, 0.013985, 0.023565, 0.031117, 0.027341, 0.029318, 0.031117, 0.035949, 0.039534, 0.044354, 0.039534, 0.040430, 0.044354, 0.061234, 0.077828, 0.069545
#*# x_count = 20
#*# y_count = 20
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 10.0
#*# max_x = 204.94
#*# min_y = 10.0
#*# max_y = 209.88000000000005
#*#
#*# [probe_eddy_ng btt_eddy]
#*# calibrated_drive_currents = 15
#*# calibration_version = 5
#*# reg_drive_current = 15
#*# tap_drive_current = 15
#*# calibration_15 = gASVowMAAAAAAAB9lCiMAXaUSwWMBGZ0b2iUjBtudW1weS5wb2x5bm9taWFsLnBvbHlub21pYWyUjApQb2x5bm9taWFslJOUKYGUfZQojARjb2VmlIwVbnVtcHkuY29yZS5tdWx0aWFycmF5lIwMX3JlY29uc3RydWN0lJOUjAVudW1weZSMB25kYXJyYXmUk5RLAIWUQwFilIeUUpQoSwFLCoWUaAyMBWR0eXBllJOUjAJmOJRLAEsBh5RSlChLA4wBPJROTk5K/////0r/////SwB0lGKJQ1CIxz3lcRz2PyraZnfra/4/uRbYh7xU6T9jdcR0NwrTPzzHgHsDT6g/hKmhYDEq1D/drwXLtirbPwtA8HX5cLY/6qY5xCh+xL+c4asSCXC9v5R0lGKMBmRvbWFpbpRoC2gOSwCFlGgQh5RSlChLAUsChZRoGIlDELKXvJFt6pQ+lbboaygklT6UdJRijAZ3aW5kb3eUaAtoDksAhZRoEIeUUpQoSwFLAoWUaBiJQxAAAAAAAADwvwAAAAAAAPA/lHSUYnVijAlmdG9oX2hpZ2iUaAUpgZR9lChoCGgLaA5LAIWUaBCHlFKUKEsBSwqFlGgYiUNQYEt4U9l+G0B9+gzPA90KQPYnA8YYXQJApEKxXBWmEUCoV6CMHLUCwPQySoVzSCzAgpAB8pDTHUDjGJlFWqk4QC+AaFHA/BHAY5q1ojMyKsCUdJRiaB1oC2gOSwCFlGgQh5RSlChLAUsChZRoGIlDEEqjoXAhIpU+wo4tdsowlT6UdJRiaCRoC2gOSwCFlGgQh5RSlChLAUsChZRoGIlDEAAAAAAAAPC/AAAAAAAA8D+UdJRidWKMBGh0b2aUaAUpgZR9lChoCGgLaA5LAIWUaBCHlFKUKEsBSwqFlGgYiUNQqGA9mOEUlT7Ap0xUmxYYPvgN+opelwe+egIiyD7Q4j36fyaL3oLxvRkbw9x1e/09st3q4sFb9j2lqRCP7SQAvrdD+xe9due9wCjb/iJ66D2UdJRiaB1oC2gOSwCFlGgQh5RSlChLAUsChZRoGIlDEABA62SILcw+1nSxnLb+E0CUdJRiaCRoC2gOSwCFlGgQh5RSlChLAUsChZRoGIlDEAAAAAAAAPC/AAAAAAAA8D+UdJRidWKMB2hfcmFuZ2WUXZQoRz7MLYhk60AAR0At//9bg2AXZYwHZl9yYW5nZZRdlChHQUgpYx+8cABHQUh6q3SkqABljAJkY5RLD3Uu
#*# tap_adjust_z = 0.1
