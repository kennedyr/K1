# Modified by Simple AF 2025-10-10_05-05-49
# K1
# Printer_size: 220x220x250
# Version: v1.0.25
# CreateDate: 2023/03/21
# Nozzle_mcu: chip: GD32F303CBT6
#             version: CR-K1-MAX-NOZZLE-V1.0.0
# Leveling_mcu: chip: GD32E230F8P6
#             version: CR-K1-MAX-LEVELING-V1.0.0
# mcu: chip: GD32F303RET6
#      version: CR4CU220812S12

[include sensorless.cfg]
[include internal_macros.cfg]

[include useful_macros.cfg]

[include belts_calibration.cfg]

[include start_end.cfg]

[include Line_Purge.cfg]

[include Smart_Park.cfg]

[include fan_control.cfg]

[include client.cfg]

[include quickstart.cfg]

[include eddyng.cfg]

[include eddyng_macro.cfg]

[mcu]
serial: /dev/ttyS7
baud: 230400
restart_method: command

[mcu nozzle_mcu]
serial: /dev/ttyS1
baud: 230400
restart_method: command

[verify_heater extruder]
[verify_heater heater_bed]
check_gain_time: 120
heating_gain: 1.0
hysteresis: 10

[gcode_arcs]
resolution: 1.0

[stepper_x]
step_pin: PC2
dir_pin: !PB9
enable_pin: !PC3
microsteps: 32
rotation_distance: 72
endstop_pin: tmc2209_stepper_x:virtual_endstop
position_endstop: 229
position_min: -1
position_max: 229
homing_speed: 36
homing_retract_dist:0

[tmc2209 stepper_x]
uart_pin:PA9
interpolate: True
run_current:1.5
sense_resistor: 0.100
stealthchop_threshold: 0
uart_address:3
diag_pin: ^PB12
# driver_IHOLDDELAY: 8
# driver_TPOWERDOWN: 20
# driver_TBL: 1
# driver_TOFF: 1
# driver_HEND: 0
# driver_HSTRT: 7
driver_SGTHRS: 65
# hold_current:1.0

[stepper_y]
step_pin: PB8
dir_pin: !PB7
enable_pin: !PC3
microsteps: 32
rotation_distance: 72
endstop_pin: tmc2209_stepper_y:virtual_endstop
position_endstop: -0.5
position_min: -0.5
position_max: 226
homing_speed: 36
homing_retract_dist:0

[tmc2209 stepper_y]
uart_pin:PA10
interpolate: True
run_current:1.5
sense_resistor: 0.100
stealthchop_threshold: 0
uart_address:3
diag_pin: ^PB13
# driver_IHOLDDELAY: 8
# driver_TPOWERDOWN: 20
# driver_TBL: 1
# driver_TOFF: 1
# driver_HEND: 0
# driver_HSTRT: 7
driver_SGTHRS: 65
# hold_current:1.0

[stepper_z]
step_pin: PB6
dir_pin: !PB5
enable_pin: !PC3
microsteps: 16
rotation_distance:8
gear_ratio: 64:20
endstop_pin: probe:z_virtual_endstop
position_max: 252
position_min: -5
# position_endstop: 0

[tmc2209 stepper_z]
uart_pin: PA11
uart_address: 3
run_current: 0.8
diag_pin: ^PB14
stealthchop_threshold: 0
sense_resistor: 0.100
# driver_IHOLDDELAY: 8
# driver_TPOWERDOWN: 20
# driver_TBL: 1
# driver_TOFF: 1
# driver_HEND: 2
# driver_HSTRT: 2
driver_SGTHRS: 0

[extruder]
max_extrude_only_distance: 1000.0
max_extrude_cross_section: 80
step_pin: nozzle_mcu:PB1
dir_pin: nozzle_mcu:PB0
enable_pin: !nozzle_mcu:PB2
microsteps: 16
rotation_distance: 6.73002
nozzle_diameter: 0.400
filament_diameter: 1.750
heater_pin: nozzle_mcu:PB7
sensor_type: EPCOS 100K B57560G104F
sensor_pin: nozzle_mcu:PA0
pressure_advance: 0.035
pressure_advance_smooth_time: 0.040
min_temp: 0
max_temp: 320
# control: pid
# pid_Kp: 25.013
# pid_Ki: 2.566
# pid_Kd: 60.966

[tmc2209 extruder]
uart_pin: nozzle_mcu:PB11
tx_pin: nozzle_mcu:PB10
uart_address: 3
run_current: 0.55
sense_resistor: 0.150
stealthchop_threshold: 0
# driver_IHOLDDELAY: 8
# driver_TPOWERDOWN: 20
# driver_TBL: 2
# driver_TOFF: 3
# driver_HEND: 0
# driver_HSTRT: 5

[heater_bed]
heater_pin: PB10
sensor_type: EPCOS 100K B57560G104F
sensor_pin: PC4
# control: pid
# pid_kp: 27
# pid_ki: 0.08
# pid_kd: 0
min_temp: 0
max_temp: 115
# control: watermark

[filament_switch_sensor filament_sensor]
pause_on_runout: false
switch_pin: !PC15
runout_gcode: _ON_FILAMENT_RUNOUT

[output_pin LED]
pin:PB0
pwm: True
cycle_time: 0.010
value: 1

[adxl345]
cs_pin: nozzle_mcu:PA4
spi_speed: 5000000
axes_map: x,-z,y
spi_software_sclk_pin: nozzle_mcu:PA5
spi_software_mosi_pin: nozzle_mcu:PA7
spi_software_miso_pin: nozzle_mcu:PA6

[resonance_tester]
accel_chip: adxl345
accel_per_hz: 75
# min_freq: 30
# max_freq: 100
probe_points:
   110,110,10

[printer]
kinematics: corexy
max_velocity: 800
max_accel: 20000
max_z_velocity: 20
square_corner_velocity: 5.0
max_z_accel: 300
# square_corner_max_velocity: 200.0
# max_accel_to_decel: 20000

[probe_eddy_ng btt_eddy]

[exclude_object]

[include custom.cfg]

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 64.064
#*# pid_ki = 1.014
#*# pid_kd = 1011.413
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 26.698
#*# pid_ki = 2.918
#*# pid_kd = 61.070
#*#
#*# [input_shaper]
#*# shaper_type_x = mzv
#*# shaper_freq_x = 53.6
#*# shaper_type_y = zv
#*# shaper_freq_y = 48.2
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	0.040594, 0.011875, -0.003545, -0.019067, -0.026862, -0.026862, -0.032836, -0.033763, -0.034690, -0.040684, -0.035826, -0.032836, -0.032836, -0.031908, -0.032836, -0.032836, -0.030981, -0.025938, -0.011293, 0.019543
#*# 	0.025375, 0.019543, 0.012786, 0.004175, 0.011832, -0.004461, -0.009452, -0.011293, -0.011293, -0.012211, -0.011293, -0.010372, -0.003545, -0.001711, -0.003545, -0.003545, -0.003545, -0.003545, 0.011875, 0.019543
#*# 	0.008939, 0.006004, 0.004175, 0.004175, -0.001711, -0.003545, -0.005376, -0.006499, -0.010372, -0.011293, -0.010372, -0.011293, -0.007419, -0.004461, -0.010372, -0.006499, -0.002628, -0.003545, 0.003263, 0.010052
#*# 	0.001232, -0.003545, -0.003545, -0.006499, -0.011293, -0.009452, -0.007414, -0.007414, -0.011293, -0.006499, -0.009452, -0.010372, -0.009452, -0.004461, -0.003545, -0.007419, -0.003545, -0.003545, 0.002351, 0.003263
#*# 	-0.011293, -0.003545, -0.003545, -0.004461, -0.003545, -0.003545, -0.003545, -0.003545, -0.003545, -0.003545, -0.010372, -0.008334, -0.006499, -0.009452, -0.004461, -0.010372, -0.011293, -0.009452, -0.002628, 0.003263
#*# 	-0.011293, -0.011293, -0.011293, -0.011293, -0.011293, -0.011293, -0.011293, -0.010372, -0.007414, -0.011293, -0.011293, -0.019067, -0.010372, -0.011293, -0.011293, -0.011293, -0.006499, -0.009452, -0.003545, -0.003545
#*# 	-0.014256, -0.010372, -0.011293, -0.010372, -0.012211, -0.010372, -0.011293, -0.010372, -0.010372, -0.011293, -0.011293, -0.011293, -0.011293, -0.011293, -0.011293, -0.011293, -0.010372, -0.010372, -0.009452, -0.003545
#*# 	-0.003545, -0.004461, -0.003545, -0.004461, -0.003545, -0.003545, -0.006499, -0.003545, -0.003545, -0.010372, -0.011293, -0.011293, -0.009452, -0.009452, -0.011293, -0.011293, -0.007419, -0.003545, 0.004175, -0.003545
#*# 	-0.002628, 0.004175, -0.002628, -0.003545, -0.003545, -0.003545, -0.003545, -0.003545, -0.001711, -0.007414, -0.011293, -0.011293, -0.011293, -0.003545, -0.006499, -0.010372, -0.010372, -0.003545, -0.001711, 0.003263
#*# 	-0.002628, 0.011875, 0.005089, 0.004175, 0.004175, -0.001711, 0.001232, 0.004175, -0.001711, -0.001711, -0.003545, -0.003545, -0.003545, -0.003545, -0.003545, -0.002628, -0.003545, 0.005089, 0.008028, 0.006004
#*# 	0.012786, 0.012786, 0.011875, 0.004175, 0.004175, 0.006004, 0.011875, 0.008028, 0.010052, 0.010963, 0.004175, 0.004175, 0.004175, 0.011875, 0.006004, 0.005089, 0.004175, 0.011875, 0.015712, 0.019543
#*# 	0.008028, 0.017726, 0.019543, 0.011875, 0.004175, 0.003263, 0.004175, 0.006004, 0.008028, 0.005089, 0.004175, 0.008025, 0.011875, 0.011875, 0.010052, 0.004175, 0.011875, 0.010963, 0.019543, 0.015709
#*# 	0.018631, 0.012786, 0.012786, 0.010052, 0.001229, 0.008028, 0.007114, 0.010052, 0.010963, 0.006004, 0.008939, 0.010052, 0.012786, 0.011875, 0.012786, 0.011875, 0.017726, 0.017726, 0.021359, 0.026280
#*# 	0.025375, 0.019543, 0.027186, 0.027186, 0.024466, 0.020451, 0.019543, 0.018635, 0.022458, 0.021359, 0.020451, 0.027186, 0.027186, 0.027186, 0.028995, 0.027186, 0.027186, 0.028090, 0.033900, 0.036798
#*# 	0.026280, 0.036798, 0.023367, 0.018635, 0.012786, 0.019543, 0.015712, 0.012786, 0.017726, 0.011875, 0.012786, 0.015902, 0.019543, 0.027186, 0.027186, 0.025375, 0.027186, 0.028995, 0.029188, 0.033900
#*# 	0.030994, 0.015681, 0.025371, 0.031191, 0.028995, 0.027186, 0.025375, 0.025375, 0.021359, 0.026280, 0.026280, 0.027186, 0.033900, 0.033900, 0.033900, 0.028995, 0.032094, 0.030093, 0.038794, 0.034802
#*# 	0.043484, 0.047268, 0.040594, 0.040596, 0.034802, 0.034802, 0.034802, 0.032997, 0.032997, 0.027186, 0.033900, 0.035706, 0.039694, 0.039694, 0.037702, 0.034802, 0.038794, 0.042398, 0.049064, 0.053025
#*# 	0.049064, 0.042398, 0.038794, 0.041496, 0.051943, 0.051046, 0.049963, 0.049250, 0.053923, 0.052128, 0.053025, 0.056612, 0.059661, 0.052128, 0.052128, 0.055716, 0.052128, 0.052128, 0.067173, 0.063237
#*# 	0.053922, 0.049064, 0.046371, 0.040594, 0.042398, 0.042398, 0.041496, 0.040594, 0.039694, 0.040594, 0.038794, 0.042398, 0.042398, 0.048167, 0.052128, 0.051046, 0.053922, 0.056612, 0.059661, 0.063237
#*# 	0.071807, 0.059661, 0.052128, 0.067173, 0.048167, 0.051943, 0.049963, 0.052128, 0.058584, 0.053922, 0.057508, 0.059661, 0.057688, 0.062343, 0.067173, 0.065205, 0.067173, 0.067173, 0.077498, 0.074656
#*# x_count = 20
#*# y_count = 20
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 10.0
#*# max_x = 204.94
#*# min_y = 10.0
#*# max_y = 209.88000000000005
#*#
#*# [bed_mesh hot]
#*# version = 1
#*# points =
#*# 	0.038639, 0.032016, 0.029318, 0.015993, 0.009299, 0.008391, 0.008391, 0.008391, 0.004582, 0.000769, 0.001677, 0.000769, 0.000769, 0.000769, 0.000769, 0.000769, 0.002585, 0.008391, 0.016895, 0.037742
#*# 	0.023565, 0.017797, 0.015993, 0.008391, 0.000769, 0.000769, -0.002144, 0.000769, -0.003237, -0.006884, 0.002585, 0.008391, 0.000769, 0.000769, 0.000769, 0.001677, 0.000769, 0.008391, 0.021760, 0.023565
#*# 	0.016886, 0.010206, 0.008391, 0.010206, 0.001677, 0.000769, 0.000769, -0.000324, -0.005971, -0.005057, -0.012729, -0.012729, -0.014558, -0.013644, -0.012729, -0.009072, -0.005971, -0.002144, 0.004580, 0.015993
#*# 	-0.002144, -0.005971, -0.006884, -0.005971, -0.009072, -0.006884, -0.005971, -0.006884, -0.006884, -0.005057, -0.005057, -0.005971, -0.007978, -0.010901, -0.012729, -0.014558, -0.012729, -0.005057, 0.001677, 0.007485
#*# 	-0.013644, -0.005057, -0.006884, -0.009807, -0.006884, -0.005971, -0.003237, -0.006884, -0.009072, -0.012729, -0.020423, -0.021340, -0.022257, -0.028142, -0.023547, -0.022444, -0.020423, -0.012729, -0.009072, -0.005057
#*# 	-0.012729, -0.009072, -0.013644, -0.012729, -0.014558, -0.013644, -0.012729, -0.013644, -0.020423, -0.018590, -0.015843, -0.012729, -0.014558, -0.012729, -0.020423, -0.020423, -0.020423, -0.012729, -0.006884, -0.005057
#*# 	-0.006884, 0.000769, -0.005971, 0.000769, -0.002144, 0.000769, 0.000769, -0.005971, -0.010901, -0.012729, -0.013644, -0.013644, -0.018590, -0.018590, -0.008009, -0.020423, -0.013644, -0.013644, -0.006884, -0.005971
#*# 	-0.005971, -0.006884, -0.003237, 0.000769, -0.006884, -0.005057, -0.005057, -0.006884, -0.010901, -0.012729, -0.012729, -0.006884, -0.012729, -0.010901, -0.012729, -0.013644, -0.012729, -0.006884, 0.001677, 0.000769
#*# 	-0.005971, 0.000769, 0.000769, -0.003237, -0.005057, 0.000769, -0.005971, -0.006884, -0.023388, -0.014558, -0.020423, -0.022257, -0.020423, -0.023361, -0.028142, -0.020423, -0.020423, -0.014558, -0.023388, 0.000769
#*# 	0.009299, 0.008391, 0.006218, 0.000769, 0.000769, 0.000769, 0.000769, 0.000769, -0.002144, -0.005057, -0.005057, -0.005971, -0.003237, -0.007978, -0.012729, -0.012729, -0.006884, -0.005057, 0.004580, 0.002585
#*# 	0.018877, 0.015993, 0.013100, 0.008391, 0.008391, 0.008391, 0.008391, 0.000769, -0.005057, -0.005971, -0.006884, -0.006884, -0.006884, -0.012729, -0.012729, -0.010901, -0.003237, 0.000769, 0.002585, 0.008391
#*# 	0.008391, 0.015088, 0.008391, 0.000769, 0.000769, -0.000324, 0.000769, 0.000769, -0.005971, -0.005057, -0.005057, -0.005971, -0.005971, -0.005057, -0.005971, -0.006884, -0.000324, 0.000769, 0.009299, 0.013100
#*# 	0.016895, 0.021760, 0.015993, 0.008391, 0.008391, 0.008391, 0.004582, 0.005488, 0.000769, 0.000769, 0.000769, 0.000769, -0.005971, 0.000769, 0.000769, 0.000769, 0.008391, 0.012194, 0.015993, 0.026442
#*# 	0.028243, 0.023565, 0.023565, 0.015993, 0.010206, 0.009299, 0.008391, 0.010206, 0.008391, 0.008391, 0.010206, 0.013100, 0.009299, 0.010206, 0.009299, 0.015993, 0.012192, 0.017797, 0.022663, 0.025368
#*# 	0.021583, 0.023565, 0.015993, 0.016895, 0.010206, 0.015088, 0.009299, 0.009299, 0.008391, 0.005488, 0.005488, 0.000769, 0.000769, 0.000769, 0.002585, 0.008391, 0.012194, 0.017797, 0.016895, 0.023565
#*# 	0.026442, 0.023565, 0.019779, 0.015993, 0.010206, -0.001253, 0.011287, 0.015993, 0.008391, 0.005488, 0.008391, 0.015993, 0.015993, 0.015993, 0.015993, 0.012194, 0.023565, 0.024467, 0.027343, 0.033983
#*# 	0.029318, 0.025368, 0.023565, 0.019779, 0.015993, 0.015993, 0.015993, 0.009299, 0.010206, 0.010206, 0.015993, 0.009299, 0.013100, 0.015993, -0.005057, 0.024467, 0.028243, 0.031117, 0.037742, 0.042392
#*# 	0.038639, 0.033982, 0.032016, 0.031117, 0.027343, 0.025368, 0.029318, 0.027341, 0.025368, 0.023565, 0.030218, 0.031117, 0.032914, 0.031117, 0.031117, 0.027343, 0.031117, 0.039534, 0.051837, 0.048095
#*# 	0.054676, 0.046141, 0.039534, 0.036846, 0.047180, 0.031117, 0.031117, 0.030218, 0.023565, 0.025368, 0.031117, 0.030218, 0.029318, 0.025368, 0.027343, 0.032016, 0.039534, 0.046141, 0.053618, 0.059293
#*# 	0.053618, 0.052728, 0.046141, 0.031117, 0.024467, 0.013985, 0.023565, 0.031117, 0.027341, 0.029318, 0.031117, 0.035949, 0.039534, 0.044354, 0.039534, 0.040430, 0.044354, 0.061234, 0.077828, 0.069545
#*# x_count = 20
#*# y_count = 20
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 10.0
#*# max_x = 204.94
#*# min_y = 10.0
#*# max_y = 209.88000000000005
#*#
#*# [probe_eddy_ng btt_eddy]
#*# calibrated_drive_currents = 15
#*# calibration_version = 5
#*# reg_drive_current = 15
#*# tap_drive_current = 15
#*# calibration_15 = gASVowMAAAAAAAB9lCiMAXaUSwWMBGZ0b2iUjBtudW1weS5wb2x5bm9taWFsLnBvbHlub21pYWyUjApQb2x5bm9taWFslJOUKYGUfZQojARjb2VmlIwVbnVtcHkuY29yZS5tdWx0aWFycmF5lIwMX3JlY29uc3RydWN0lJOUjAVudW1weZSMB25kYXJyYXmUk5RLAIWUQwFilIeUUpQoSwFLCoWUaAyMBWR0eXBllJOUjAJmOJRLAEsBh5RSlChLA4wBPJROTk5K/////0r/////SwB0lGKJQ1Adf7m6mcb1PxlELiRV+P0/tHcOqhu35j+NYoMlrrrbP8nXrDo6auE/KPYslosksT/DcfoWvkvbvwXT8R8V+sY/4aIbsuLP0z+n/9JFkEiqv5R0lGKMBmRvbWFpbpRoC2gOSwCFlGgQh5RSlChLAUsChZRoGIlDEKcDpE9f5pQ+emjBRc0ilT6UdJRijAZ3aW5kb3eUaAtoDksAhZRoEIeUUpQoSwFLAoWUaBiJQxAAAAAAAADwvwAAAAAAAPA/lHSUYnVijAlmdG9oX2hpZ2iUaAUpgZR9lChoCGgLaA5LAIWUaBCHlFKUKEsBSwqFlGgYiUNQO/+nsM1wG0An3ZIYBUEKQINcIsZXCARAncznCs0CFEAe85HZMDYMwB3Et4syMTDAVl0ZH1EQI0AlqYPv9SI7QHeek7o8SRbAlk6IFNMPLMCUdJRiaB1oC2gOSwCFlGgQh5RSlChLAUsChZRoGIlDED3YCI3GIJU+fb+3jr0vlT6UdJRiaCRoC2gOSwCFlGgQh5RSlChLAUsChZRoGIlDEAAAAAAAAPC/AAAAAAAA8D+UdJRidWKMBGh0b2aUaAUpgZR9lChoCGgLaA5LAIWUaBCHlFKUKEsBSwqFlGgYiUNQ93V8GxETlT7xWC/F2JwYPh0s/zbRYwq+oEBrRgqW9j11E5lMtOC9vQKmTjjwLdW9vwUfD5yKy71SMKJe0hjhPeygHsT4taA9OZH6a8gW0b2UdJRiaB1oC2gOSwCFlGgQh5RSlChLAUsChZRoGIlDEAB4QWF5vgw/VhA+ouz3E0CUdJRiaCRoC2gOSwCFlGgQh5RSlChLAUsChZRoGIlDEAAAAAAAAPC/AAAAAAAA8D+UdJRidWKMB2hfcmFuZ2WUXZQoRz8MvnlhQXgAR0At//9lForpZYwHZl9yYW5nZZRdlChHQUgqlco0sABHQUh/a4ZFuABljAJkY5RLD3Uu
#*# tap_adjust_z = 0.025
